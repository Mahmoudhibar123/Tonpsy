{"ast":null,"code":"import _classCallCheck from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import{Switch,Route}from\"react-router-dom\";import{toast,ToastContainer}from\"react-toastify\";import Home from\"./components/Home\";import Login from\"./components/auth/Login\";import Signup from\"./components/auth/Register\";import Afterlogin from\"./components/auth/Afterlogin\";import Doctor from\"./components/doctors/Doctor\";import Appointment from\"./components/appointment/Appointment\";import MyProfile from\"./components/user/MyProfile\";import MyBookings from\"./components/user/MyBookings\";import Success from\"./components/appointment/Success\";import PaySuccess from\"./components/pay/PaySuccess\";import PayFailed from\"./components/pay/PayFailed\";import{API_ENDPOINT,IMAGE_ENDPOINT}from\"./constant\";import AboutMe from\"./components/user/AboutMe\";import ProfileImage from\"./components/user/ProfileImage\";import TherapistProfile from\"./components/user/TherapistProfile\";import TherapistBookings from\"./components/user/TherapistBookings\";import PayForm from\"./components/pay/PayForm\";import TherapistDashboard from\"./components/user/TherapistDashboard\";import Main from\"./components/Chat/Main/Main\";import{AppString}from\"./constant\";import AdminDashboard from\"./components/admin/AdminDashboard\";import Booking from\"./components/admin/Booking\";import Customer from\"./components/admin/Customer\";import Therapist from\"./components/admin/Therapists\";import Transaction from\"./components/admin/Transaction\";import AdminLogin from\"./components/admin/auth/AdminLogin\";import TherapistCertificate from\"./components/user/TherapistCertificate\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.loginStatus=function(){axios.get(\"\".concat(API_ENDPOINT,\"/logged_in\"),{withCredentials:true}).then(function(response){if(response.data.logged_in){_this.handleLogin(response.data);}else{_this.handleLogout();}}).catch(function(error){return console.log(\"api errors:\",error);});};_this.handleLogin=function(data){_this.setState({isLoggedIn:true,user:data.user});if(data.user.role.toLowerCase()===\"therapist\"){localStorage.setItem(AppString.ID,data.user.doctor.id);localStorage.setItem(AppString.NICKNAME,data.user.doctor.name);}else{localStorage.setItem(AppString.ID,data.user.id);localStorage.setItem(AppString.NICKNAME,data.user.first_name);}localStorage.setItem(AppString.ROLE,data.user.role);localStorage.setItem(AppString.PHOTO_URL,IMAGE_ENDPOINT+data.user.image);};_this.handleLogout=function(){_this.setState({isLoggedIn:false,user:{}});};_this.showToast=function(type,message){// 0 = warning, 1 = success\nswitch(type){case 0:toast.warning(message);break;case 1:toast.success(message);break;case 2:toast.error(message);break;default:break;}};_this.state={isLoggedIn:false,user:{}};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){this.loginStatus();}},{key:\"render\",value:function render(){var _this2=this;console.log(\"First: \",this.state.user,this.props);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ToastContainer,{autoClose:2000,hideProgressBar:true,position:toast.POSITION.BOTTOM_RIGHT}),\" \",/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",render:function render(props){return/*#__PURE__*/React.createElement(Home,Object.assign({},props,{handleLogout:_this2.handleLogout,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn,user:_this2.state.user}));}}),\" \",/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/auth/login/:role\",render:function render(props){return/*#__PURE__*/React.createElement(Login,Object.assign({},props,{handleLogin:_this2.handleLogin,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn}));}}),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/auth/register/:role\",render:function render(props){return/*#__PURE__*/React.createElement(Signup,Object.assign({},props,{handleLogin:_this2.handleLogin,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn}));}}),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/search\",component:Afterlogin}),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/doctors/psychiatrist\",render:function render(props){return/*#__PURE__*/React.createElement(Doctor,Object.assign({},props,{handleLogout:_this2.handleLogout,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn,user:_this2.state.user}));}}),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/booking\",render:function render(props){return/*#__PURE__*/React.createElement(Appointment,Object.assign({},props,{handleLogout:_this2.handleLogout,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn}));}}),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/my\",render:function render(props){return _this2.state.isLoggedIn&&_this2.state.user.role.toLowerCase()===\"therapist\"?/*#__PURE__*/React.createElement(TherapistProfile,Object.assign({},props,{handleLogout:_this2.handleLogout,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn,user:_this2.state.user})):/*#__PURE__*/React.createElement(MyProfile,Object.assign({},props,{handleLogout:_this2.handleLogout,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn,user:_this2.state.user}));}}),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/mybookings\",render:function render(props){return/*#__PURE__*/React.createElement(MyBookings,Object.assign({},props,{handleLogout:_this2.handleLogout,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn,user:_this2.state.user}));}}),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/booking-success\",render:function render(props){return/*#__PURE__*/React.createElement(Success,Object.assign({},props,{handleLogout:_this2.handleLogout,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn,user:_this2.state.user}));}}),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/about\",render:function render(props){return/*#__PURE__*/React.createElement(AboutMe,Object.assign({},props,{handleLogout:_this2.handleLogout,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn}));}}),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/profile-picture\",render:function render(props){return/*#__PURE__*/React.createElement(ProfileImage,Object.assign({},props,{handleLogout:_this2.handleLogout,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn}));}}),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/therapist-certificate\",render:function render(props){return/*#__PURE__*/React.createElement(TherapistCertificate,Object.assign({},props,{handleLogout:_this2.handleLogout,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn}));}}),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/customer-bookings\",render:function render(props){return/*#__PURE__*/React.createElement(TherapistBookings,Object.assign({},props,{handleLogout:_this2.handleLogout,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn,user:_this2.state.user}));}}),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/pay\",render:function render(props){return/*#__PURE__*/React.createElement(PayForm,Object.assign({},props,{handleLogout:_this2.handleLogout,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn,user:_this2.state.user}));}}),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/pay-success\",render:function render(props){return/*#__PURE__*/React.createElement(PaySuccess,Object.assign({},props,{handleLogout:_this2.handleLogout,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn,user:_this2.state.user}));}}),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/pay-failed\",render:function render(props){return/*#__PURE__*/React.createElement(PayFailed,Object.assign({},props,{handleLogout:_this2.handleLogout,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn,user:_this2.state.user}));}}),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/dashboard\",render:function render(props){return/*#__PURE__*/React.createElement(TherapistDashboard,Object.assign({},props,{handleLogout:_this2.handleLogout,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn,user:_this2.state.user}));}}),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/main\",render:function render(props){return/*#__PURE__*/React.createElement(Main,Object.assign({},props,{handleLogout:_this2.handleLogout,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn,user:_this2.state.user}));}}),\" \",/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/admin\",render:function render(props){return/*#__PURE__*/React.createElement(AdminLogin,Object.assign({},props,{handleLogin:_this2.handleLogin,showToast:_this2.showToast}));}}),\" \",/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/admin/dashboard\",render:function render(props){return/*#__PURE__*/React.createElement(AdminDashboard,Object.assign({},props,{handleLogout:_this2.handleLogout,handleLogin:_this2.handleLogin,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn}));}}),\" \",/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/admin/bookings\",render:function render(props){return/*#__PURE__*/React.createElement(Booking,Object.assign({},props,{handleLogout:_this2.handleLogout,handleLogin:_this2.handleLogin,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn}));}}),\" \",/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/admin/customers\",render:function render(props){return/*#__PURE__*/React.createElement(Customer,Object.assign({},props,{handleLogout:_this2.handleLogout,handleLogin:_this2.handleLogin,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn}));}}),\" \",/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/admin/therapists\",render:function render(props){return/*#__PURE__*/React.createElement(Therapist,Object.assign({},props,{handleLogout:_this2.handleLogout,handleLogin:_this2.handleLogin,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn}));}}),\" \",/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/admin/transactions\",render:function render(props){return/*#__PURE__*/React.createElement(Transaction,Object.assign({},props,{handleLogout:_this2.handleLogout,handleLogin:_this2.handleLogin,showToast:_this2.showToast,loggedInStatus:_this2.state.isLoggedIn}));}}),\" \"),\" \");}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/home/fizoumizou/Documents/pfe/react/src/App.js"],"names":["React","Component","axios","Switch","Route","toast","ToastContainer","Home","Login","Signup","Afterlogin","Doctor","Appointment","MyProfile","MyBookings","Success","PaySuccess","PayFailed","API_ENDPOINT","IMAGE_ENDPOINT","AboutMe","ProfileImage","TherapistProfile","TherapistBookings","PayForm","TherapistDashboard","Main","AppString","AdminDashboard","Booking","Customer","Therapist","Transaction","AdminLogin","TherapistCertificate","App","props","loginStatus","get","withCredentials","then","response","data","logged_in","handleLogin","handleLogout","catch","error","console","log","setState","isLoggedIn","user","role","toLowerCase","localStorage","setItem","ID","doctor","id","NICKNAME","name","first_name","ROLE","PHOTO_URL","image","showToast","type","message","warning","success","state","POSITION","BOTTOM_RIGHT"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport Home from \"./components/Home\";\r\nimport Login from \"./components/auth/Login\";\r\nimport Signup from \"./components/auth/Register\";\r\nimport Afterlogin from \"./components/auth/Afterlogin\";\r\n\r\nimport Doctor from \"./components/doctors/Doctor\";\r\nimport Appointment from \"./components/appointment/Appointment\";\r\nimport MyProfile from \"./components/user/MyProfile\";\r\nimport MyBookings from \"./components/user/MyBookings\";\r\nimport Success from \"./components/appointment/Success\";\r\nimport PaySuccess from \"./components/pay/PaySuccess\";\r\nimport PayFailed from \"./components/pay/PayFailed\";\r\nimport { API_ENDPOINT, IMAGE_ENDPOINT } from \"./constant\";\r\nimport AboutMe from \"./components/user/AboutMe\";\r\nimport ProfileImage from \"./components/user/ProfileImage\";\r\nimport TherapistProfile from \"./components/user/TherapistProfile\";\r\nimport TherapistBookings from \"./components/user/TherapistBookings\";\r\nimport PayForm from \"./components/pay/PayForm\";\r\nimport TherapistDashboard from \"./components/user/TherapistDashboard\";\r\nimport Main from \"./components/Chat/Main/Main\";\r\nimport { AppString } from \"./constant\";\r\nimport AdminDashboard from \"./components/admin/AdminDashboard\";\r\nimport Booking from \"./components/admin/Booking\";\r\nimport Customer from \"./components/admin/Customer\";\r\nimport Therapist from \"./components/admin/Therapists\";\r\nimport Transaction from \"./components/admin/Transaction\";\r\nimport AdminLogin from \"./components/admin/auth/AdminLogin\";\r\nimport TherapistCertificate from \"./components/user/TherapistCertificate\";\r\n\r\nclass App extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isLoggedIn: false,\r\n            user: {},\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loginStatus();\r\n    }\r\n\r\n    loginStatus = () => {\r\n        axios\r\n            .get(`${API_ENDPOINT}/logged_in`, { withCredentials: true })\r\n            .then((response) => {\r\n                if (response.data.logged_in) {\r\n                    this.handleLogin(response.data);\r\n                } else {\r\n                    this.handleLogout();\r\n                }\r\n            })\r\n            .catch((error) => console.log(\"api errors:\", error));\r\n    };\r\n\r\n    handleLogin = (data) => {\r\n        this.setState({\r\n            isLoggedIn: true,\r\n            user: data.user,\r\n        });\r\n        if (data.user.role.toLowerCase() === \"therapist\") {\r\n            localStorage.setItem(AppString.ID, data.user.doctor.id);\r\n            localStorage.setItem(AppString.NICKNAME, data.user.doctor.name);\r\n        } else {\r\n            localStorage.setItem(AppString.ID, data.user.id);\r\n            localStorage.setItem(AppString.NICKNAME, data.user.first_name);\r\n        }\r\n        localStorage.setItem(AppString.ROLE, data.user.role);\r\n        localStorage.setItem(AppString.PHOTO_URL, IMAGE_ENDPOINT + data.user.image);\r\n    };\r\n\r\n    handleLogout = () => {\r\n        this.setState({\r\n            isLoggedIn: false,\r\n            user: {},\r\n        });\r\n    };\r\n\r\n    showToast = (type, message) => {\r\n        // 0 = warning, 1 = success\r\n        switch (type) {\r\n            case 0:\r\n                toast.warning(message);\r\n                break;\r\n            case 1:\r\n                toast.success(message);\r\n                break;\r\n            case 2:\r\n                toast.error(message);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    render() {\r\n        console.log(\"First: \", this.state.user, this.props);\r\n\r\n        return ( <\r\n            div >\r\n            <\r\n            ToastContainer autoClose = { 2000 }\r\n            hideProgressBar = { true }\r\n            position = { toast.POSITION.BOTTOM_RIGHT }\r\n            /> <\r\n            Switch >\r\n            <\r\n            Route exact path = \"/\"\r\n            render = {\r\n                (props) => ( <\r\n                    Home {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    user = { this.state.user }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route exact path = \"/auth/login/:role\"\r\n            render = {\r\n                (props) => ( <\r\n                    Login {...props }\r\n                    handleLogin = { this.handleLogin }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route path = \"/auth/register/:role\"\r\n            render = {\r\n                (props) => ( <\r\n                    Signup {...props }\r\n                    handleLogin = { this.handleLogin }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route path = \"/search\"\r\n            component = { Afterlogin }\r\n            /> <\r\n            Route path = \"/doctors/psychiatrist\"\r\n            render = {\r\n                (props) => ( <\r\n                    Doctor {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    user = { this.state.user }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route path = \"/booking\"\r\n            render = {\r\n                (props) => ( <\r\n                    Appointment {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route path = \"/my\"\r\n            render = {\r\n                (props) =>\r\n                this.state.isLoggedIn &&\r\n                this.state.user.role.toLowerCase() === \"therapist\" ? ( <\r\n                    TherapistProfile {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    user = { this.state.user }\r\n                    />\r\n                ) : ( <\r\n                    MyProfile {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    user = { this.state.user }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route path = \"/mybookings\"\r\n            render = {\r\n                (props) => ( <\r\n                    MyBookings {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    user = { this.state.user }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route path = \"/booking-success\"\r\n            render = {\r\n                (props) => ( <\r\n                    Success {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    user = { this.state.user }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route path = \"/about\"\r\n            render = {\r\n                (props) => ( <\r\n                    AboutMe {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route path = \"/profile-picture\"\r\n            render = {\r\n                (props) => ( <\r\n                    ProfileImage {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route path = \"/therapist-certificate\"\r\n            render = {\r\n                (props) => ( <\r\n                    TherapistCertificate {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route path = \"/customer-bookings\"\r\n            render = {\r\n                (props) => ( <\r\n                    TherapistBookings {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    user = { this.state.user }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route path = \"/pay\"\r\n            render = {\r\n                (props) => ( <\r\n                    PayForm {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    user = { this.state.user }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route path = \"/pay-success\"\r\n            render = {\r\n                (props) => ( <\r\n                    PaySuccess {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    user = { this.state.user }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route path = \"/pay-failed\"\r\n            render = {\r\n                (props) => ( <\r\n                    PayFailed {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    user = { this.state.user }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route path = \"/dashboard\"\r\n            render = {\r\n                (props) => ( <\r\n                    TherapistDashboard {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    user = { this.state.user }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route path = \"/main\"\r\n            render = {\r\n                (props) => ( <\r\n                    Main {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    user = { this.state.user }\r\n                    />\r\n                )\r\n            }\r\n            />\r\n\r\n            { /* Admin  Routes */ } <\r\n            Route exact path = \"/admin\"\r\n            render = {\r\n                (props) => ( <\r\n                    AdminLogin {...props }\r\n                    handleLogin = { this.handleLogin }\r\n                    showToast = { this.showToast }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route exact path = \"/admin/dashboard\"\r\n            render = {\r\n                (props) => ( <\r\n                    AdminDashboard {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    handleLogin = { this.handleLogin }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route exact path = \"/admin/bookings\"\r\n            render = {\r\n                (props) => ( <\r\n                    Booking {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    handleLogin = { this.handleLogin }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route exact path = \"/admin/customers\"\r\n            render = {\r\n                (props) => ( <\r\n                    Customer {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    handleLogin = { this.handleLogin }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route exact path = \"/admin/therapists\"\r\n            render = {\r\n                (props) => ( <\r\n                    Therapist {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    handleLogin = { this.handleLogin }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            Route exact path = \"/admin/transactions\"\r\n            render = {\r\n                (props) => ( <\r\n                    Transaction {...props }\r\n                    handleLogout = { this.handleLogout }\r\n                    handleLogin = { this.handleLogin }\r\n                    showToast = { this.showToast }\r\n                    loggedInStatus = { this.state.isLoggedIn }\r\n                    />\r\n                )\r\n            }\r\n            /> <\r\n            /Switch> <\r\n            /div>\r\n        );\r\n    }\r\n}\r\nexport default App;"]},"metadata":{},"sourceType":"module"}