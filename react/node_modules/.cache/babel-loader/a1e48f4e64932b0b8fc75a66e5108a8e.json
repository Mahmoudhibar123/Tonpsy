{"ast":null,"code":"import _regeneratorRuntime from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from\"react\";import axios from\"axios\";import{loadStripe}from\"@stripe/stripe-js\";import{CardElement,Elements,useStripe,useElements}from\"@stripe/react-stripe-js\";import Header from\"../Header\";import Footer from\"../Footer\";import CardType from\"../../assets/img/card_type.jpg\";import{API_ENDPOINT}from\"../../constant\";var CheckoutForm=function CheckoutForm(props){var stripe=useStripe();var elements=useElements();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _yield$stripe$createT,error,token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return stripe.createToken(elements.getElement(CardElement));case 3:_yield$stripe$createT=_context.sent;error=_yield$stripe$createT.error;token=_yield$stripe$createT.token;if(error){console.log(\"[error]\",error);}else{axios.post(\"\".concat(API_ENDPOINT,\"/payments\"),{token:token.id,payment:{booking_id:props.id,amount:\"50\",currency:\"USD\",description:\"Consulation charges.\"}},{withCredentials:true}).then(function(response){props.history.push(\"/pay-success\");}).catch(function(response){props.history.push(\"/pay-failed\");});}case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(CardElement,null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary mt-4\",disabled:!stripe},\"Pay\"));};var stripePromise=loadStripe(\"pk_test_xewRnsGPAedcJWQph45FP3YD00Qqsd1KHm\");var PayForm=function PayForm(props){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,{loggedInStatus:props.loggedInStatus,user:props.user,isInner:true,handleLogout:props.handleLogout}),/*#__PURE__*/React.createElement(\"section\",{id:\"therapists\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container py-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 text-center col-lg-6 mx-auto py-5\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"h3 mt-5\"},\"Payment\"),/*#__PURE__*/React.createElement(\"div\",{className:\"card p-4\"},/*#__PURE__*/React.createElement(Elements,{stripe:stripePromise},/*#__PURE__*/React.createElement(CheckoutForm,{id:props.location.state.id,history:props.history}))),/*#__PURE__*/React.createElement(\"img\",{src:CardType,width:\"200\",alt:\"\"}))))),/*#__PURE__*/React.createElement(Footer,null));};export default PayForm;","map":{"version":3,"sources":["/home/fizoumizou/Documents/pfe/react/src/components/pay/PayForm.js"],"names":["React","axios","loadStripe","CardElement","Elements","useStripe","useElements","Header","Footer","CardType","API_ENDPOINT","CheckoutForm","props","stripe","elements","handleSubmit","event","preventDefault","createToken","getElement","error","token","console","log","post","id","payment","booking_id","amount","currency","description","withCredentials","then","response","history","push","catch","stripePromise","PayForm","loggedInStatus","user","handleLogout","location","state"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport {\r\n  CardElement,\r\n  Elements,\r\n  useStripe,\r\n  useElements,\r\n} from \"@stripe/react-stripe-js\";\r\nimport Header from \"../Header\";\r\nimport Footer from \"../Footer\";\r\nimport CardType from \"../../assets/img/card_type.jpg\";\r\nimport { API_ENDPOINT } from \"../../constant\";\r\n\r\nconst CheckoutForm = (props) => {\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const { error, token } = await stripe.createToken(elements.getElement(CardElement));\r\n    if (error) {\r\n      console.log(\"[error]\", error);\r\n    } else {\r\n      axios\r\n        .post(\r\n          `${API_ENDPOINT}/payments`,\r\n          {\r\n            token: token.id,\r\n            payment: {\r\n              booking_id: props.id,\r\n              amount: \"50\",\r\n              currency: \"USD\",\r\n              description: \"Consulation charges.\",\r\n            },\r\n          },\r\n          {\r\n            withCredentials: true,\r\n          }\r\n        )\r\n        .then((response) => {\r\n          props.history.push(\"/pay-success\");\r\n        })\r\n        .catch((response) => {\r\n          props.history.push(\"/pay-failed\");\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <CardElement />\r\n      <button type=\"submit\" className=\"btn btn-primary mt-4\" disabled={!stripe}>\r\n        Pay\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst stripePromise = loadStripe(\"pk_test_xewRnsGPAedcJWQph45FP3YD00Qqsd1KHm\");\r\n\r\nconst PayForm = (props) => (\r\n  <>\r\n    <Header loggedInStatus={props.loggedInStatus} user={props.user} isInner={true} handleLogout={props.handleLogout} />\r\n    <section id=\"therapists\">\r\n      <div className=\"container py-5\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-8 text-center col-lg-6 mx-auto py-5\">\r\n            <h1 className=\"h3 mt-5\">Payment</h1>\r\n            <div className=\"card p-4\">\r\n              <Elements stripe={stripePromise}>\r\n                <CheckoutForm id={props.location.state.id} history={props.history}/>\r\n              </Elements>\r\n            </div>\r\n            <img src={CardType} width=\"200\" alt=\"\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <Footer />\r\n  </>\r\n);\r\n\r\nexport default PayForm;\r\n"]},"metadata":{},"sourceType":"module"}