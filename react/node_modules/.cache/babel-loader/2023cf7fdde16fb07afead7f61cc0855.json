{"ast":null,"code":"import _defineProperty from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import{API_ENDPOINT}from\"../../../constant\";import\"./AdminLogin.css\";var AdminLogin=/*#__PURE__*/function(_Component){_inherits(AdminLogin,_Component);var _super=_createSuper(AdminLogin);function AdminLogin(props){var _this;_classCallCheck(this,AdminLogin);_this=_super.call(this,props);_this.handleChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.handleSubmit=function(event){event.preventDefault();var _this$state=_this.state,username=_this$state.username,password=_this$state.password;var user={username:username,password:password};axios.post(\"\".concat(API_ENDPOINT,\"/login\"),{user:user},{withCredentials:true}).then(function(response){if(response.data.logged_in){response.data.user[\"doctor\"]={};response.data.user[\"doctor\"][\"id\"]=response.data.user.doctor_id;response.data.user[\"doctor\"][\"name\"]=response.data.user.first_name;_this.props.handleLogin(response.data);_this.props.showToast(1,\"Login successfull.\");_this.redirect(response.data.user);}else{_this.props.showToast(2,\"Invalid username or password.\");_this.setState({errors:response.data.errors});}}).catch(function(error){return console.log(\"api errors:\",error);});};_this.redirect=function(user){if(user.role.toLowerCase()===\"therapist\"){_this.props.history.push(\"/dashboard\");}else if(user.role.toLowerCase()===\"superadmin\"){_this.props.history.push(\"/admin/dashboard\");}else{_this.props.history.push(\"/doctors/psychiatrist\");}};_this.handleErrors=function(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",null,_this.state.errors.map(function(error){return/*#__PURE__*/React.createElement(\"li\",{key:error},error);})));};_this.state={username:\"\",email:\"\",password:\"\",errors:\"\"};return _this;}_createClass(AdminLogin,[{key:\"render\",value:function render(){var _this$state2=this.state,username=_this$state2.username,password=_this$state2.password;return/*#__PURE__*/React.createElement(\"div\",{className:\"login_form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-xl-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-group my-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card p-sm-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body text-center\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"h3\"},\"Admin Login\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Username\",name:\"username\",value:username,onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"Password\",name:\"password\",value:password,onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-6\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\"},\"Login\")))))))))));}}]);return AdminLogin;}(Component);export default AdminLogin;","map":{"version":3,"sources":["/home/fizoumizou/Documents/pfe/react/src/components/admin/auth/AdminLogin.js"],"names":["React","Component","axios","API_ENDPOINT","AdminLogin","props","handleChange","event","target","name","value","setState","handleSubmit","preventDefault","state","username","password","user","post","withCredentials","then","response","data","logged_in","doctor_id","first_name","handleLogin","showToast","redirect","errors","catch","error","console","log","role","toLowerCase","history","push","handleErrors","map","email"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { API_ENDPOINT } from \"../../../constant\";\r\nimport \"./AdminLogin.css\";\r\n\r\nclass AdminLogin extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n      errors: \"\",\r\n    };\r\n  }\r\n\r\n  handleChange = (event) => {\r\n    const { name, value } = event.target;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    const { username, password } = this.state;\r\n    let user = {\r\n      username: username,\r\n      password: password,\r\n    };\r\n\r\n    axios\r\n      .post(`${API_ENDPOINT}/login`, { user }, { withCredentials: true })\r\n      .then((response) => {\r\n        if (response.data.logged_in) {\r\n          response.data.user[\"doctor\"] = {};\r\n          response.data.user[\"doctor\"][\"id\"] = response.data.user.doctor_id;\r\n          response.data.user[\"doctor\"][\"name\"] = response.data.user.first_name;\r\n          this.props.handleLogin(response.data);\r\n          this.props.showToast(1, \"Login successfull.\");\r\n          this.redirect(response.data.user);\r\n        } else {\r\n          this.props.showToast(2, \"Invalid username or password.\");\r\n          this.setState({\r\n            errors: response.data.errors,\r\n          });\r\n        }\r\n      })\r\n      .catch((error) => console.log(\"api errors:\", error));\r\n  };\r\n\r\n  redirect = (user) => {\r\n    if (user.role.toLowerCase() === \"therapist\") {\r\n      this.props.history.push(\"/dashboard\");\r\n    } else if (user.role.toLowerCase() === \"superadmin\") {\r\n      this.props.history.push(\"/admin/dashboard\");\r\n    } else {\r\n      this.props.history.push(\"/doctors/psychiatrist\");\r\n    }\r\n  };\r\n\r\n  handleErrors = () => {\r\n    return (\r\n      <div>\r\n        <ul>\r\n          {this.state.errors.map((error) => {\r\n            return <li key={error}>{error}</li>;\r\n          })}\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { username, password } = this.state;\r\n    return (\r\n      <div className=\"login_form\">\r\n        <div className=\"container\">\r\n          <div className=\"row justify-content-center\">\r\n            <div className=\"col-xl-5\">\r\n              <div className=\"card-group my-5\">\r\n                <div className=\"card p-sm-4\">\r\n                  <div className=\"card-body text-center\">\r\n                    <h1 className=\"h3\">Admin Login</h1>\r\n                    <form onSubmit={this.handleSubmit}>\r\n                      <div className=\"form-group\">\r\n                        <input\r\n                          type=\"text\"\r\n                          className=\"form-control\"\r\n                          placeholder=\"Username\"\r\n                          name=\"username\"\r\n                          value={username}\r\n                          onChange={this.handleChange}\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <input\r\n                          type=\"password\"\r\n                          className=\"form-control\"\r\n                          placeholder=\"Password\"\r\n                          name=\"password\"\r\n                          value={password}\r\n                          onChange={this.handleChange}\r\n                        />\r\n                      </div>\r\n                      <div className=\"row\">\r\n                        <div className=\"col-sm-6\">\r\n                          <button type=\"submit\" className=\"btn btn-primary\">\r\n                            Login\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AdminLogin;\r\n"]},"metadata":{},"sourceType":"module"}