{"ast":null,"code":"import _classCallCheck from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import Header from\"./layout/Header\";import Sidebar from\"./layout/Sidebar\";import{API_ENDPOINT,IMAGE_ENDPOINT}from\"../../constant\";import{Container,Row,Col,Card}from\"react-bootstrap\";import Placeholder from\"../../assets/img/profile-placeholder.png\";var Therapist=/*#__PURE__*/function(_Component){_inherits(Therapist,_Component);var _super=_createSuper(Therapist);function Therapist(props){var _this;_classCallCheck(this,Therapist);_this=_super.call(this,props);_this.getData=function(){axios.get(\"\".concat(API_ENDPOINT,\"/admin/users?role=1\"),{withCredentials:true}).then(function(response){if(response.status===200){var data=response.data.users;_this.setState({users:data});}}).catch(function(error){return console.log(error);});};_this.onChange=function(id,e){axios.put(\"\".concat(API_ENDPOINT,\"/admin/users/\").concat(id,\"/update_status?active=\").concat(e.target.value),{},{\"Content-Type\":\"multipart/form-data\",withCredentials:true}).then(function(response){_this.props.showToast(1,\"User status updated.\");_this.getData();}).catch(function(response){_this.props.showToast(2,\"Unbale to update User Status.\");console.log(response);});};_this.state={users:[]};return _this;}_createClass(Therapist,[{key:\"componentDidMount\",value:function componentDidMount(){this.getData();}},{key:\"render\",value:function render(){var _this2=this;var handleLogout=this.props.handleLogout;var users=this.state.users;console.log(users);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,{handleLogout:handleLogout}),/*#__PURE__*/React.createElement(Sidebar,null),/*#__PURE__*/React.createElement(Container,{fluid:true,className:\"ucmain-content\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"12\",className:\"pr-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ucinner__content\"},/*#__PURE__*/React.createElement(Row,{className:\"mx-0 mt-3\"},/*#__PURE__*/React.createElement(Col,{md:\"12\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"h2\"},\"Therapists\")),/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table table-striped table-sm\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"#\"),/*#__PURE__*/React.createElement(\"th\",null,\"Photo\"),/*#__PURE__*/React.createElement(\"th\",null,\"Username\"),/*#__PURE__*/React.createElement(\"th\",null,\"Email\"),/*#__PURE__*/React.createElement(\"th\",null,\"Role\"),/*#__PURE__*/React.createElement(\"th\",null,\"Certificate\"),/*#__PURE__*/React.createElement(\"th\",null,\"Status\"))),/*#__PURE__*/React.createElement(\"tbody\",null,users.map(function(user){return/*#__PURE__*/React.createElement(\"tr\",{key:\"user-\".concat(user.id)},/*#__PURE__*/React.createElement(\"td\",null,user.id),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"img\",{src:user.image?IMAGE_ENDPOINT+user.image:Placeholder,width:\"60\",alt:\"avatar\"})),/*#__PURE__*/React.createElement(\"td\",null,user.username),/*#__PURE__*/React.createElement(\"td\",null,user.email),/*#__PURE__*/React.createElement(\"td\",null,user.role),/*#__PURE__*/React.createElement(\"td\",null,user.role.toLowerCase()==='therapist'&&user.doctor.certificate?/*#__PURE__*/React.createElement(\"a\",{href:IMAGE_ENDPOINT+user.doctor.certificate,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-primary\"},\"view certificate\"):'N/A'),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"select\",{className:\"form-control\",onChange:function onChange(e){return _this2.onChange(user.id,e);}},/*#__PURE__*/React.createElement(\"option\",{value:true,selected:user.active,defaultValue:user.active},\"Active\"),/*#__PURE__*/React.createElement(\"option\",{value:false,selected:!user.active,defaultValue:!user.active},\"Inactive\"))));})))))))))))));}}]);return Therapist;}(Component);export default Therapist;","map":{"version":3,"sources":["/home/fizoumizou/Documents/pfe/react/src/components/admin/Therapists.js"],"names":["React","Component","axios","Header","Sidebar","API_ENDPOINT","IMAGE_ENDPOINT","Container","Row","Col","Card","Placeholder","Therapist","props","getData","get","withCredentials","then","response","status","data","users","setState","catch","error","console","log","onChange","id","e","put","target","value","showToast","state","handleLogout","map","user","image","username","email","role","toLowerCase","doctor","certificate","active"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport Header from \"./layout/Header\";\r\nimport Sidebar from \"./layout/Sidebar\";\r\nimport { API_ENDPOINT, IMAGE_ENDPOINT } from \"../../constant\";\r\nimport { Container, Row, Col, Card } from \"react-bootstrap\";\r\nimport Placeholder from \"../../assets/img/profile-placeholder.png\";\r\n\r\nclass Therapist extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      users: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData = () => {\r\n    axios\r\n      .get(`${API_ENDPOINT}/admin/users?role=1`, { withCredentials: true })\r\n      .then((response) => {\r\n        if (response.status === 200) {\r\n          var data = response.data.users;\r\n          this.setState({ users: data });\r\n        }\r\n      })\r\n      .catch((error) => console.log(error));\r\n  };\r\n\r\n  onChange = (id, e) => {\r\n    axios\r\n      .put(\r\n        `${API_ENDPOINT}/admin/users/${id}/update_status?active=${e.target.value}`,\r\n        {},\r\n        { \"Content-Type\": \"multipart/form-data\", withCredentials: true }\r\n      )\r\n      .then((response) => {\r\n        this.props.showToast(1, \"User status updated.\");\r\n        this.getData();\r\n      })\r\n      .catch((response) => {\r\n        this.props.showToast(2, \"Unbale to update User Status.\");\r\n        console.log(response);\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const { handleLogout } = this.props;\r\n    const { users } = this.state;\r\n    console.log(users)\r\n\r\n    return (\r\n      <>\r\n        <Header handleLogout={handleLogout} />\r\n        <Sidebar />\r\n        <Container fluid className=\"ucmain-content\">\r\n          <Row>\r\n            <Col lg=\"12\" className=\"pr-0\">\r\n              <div className=\"ucinner__content\">\r\n                <Row className=\"mx-0 mt-3\">\r\n                  <Col md=\"12\">\r\n                    <Card>\r\n                      <Card.Body>\r\n                        <div className=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3\">\r\n                          <h1 className=\"h2\">Therapists</h1>\r\n                        </div>\r\n                        <div className=\"table-responsive\">\r\n                          <table className=\"table table-striped table-sm\">\r\n                            <thead>\r\n                              <tr>\r\n                                <th>#</th>\r\n                                <th>Photo</th>\r\n                                <th>Username</th>\r\n                                <th>Email</th>\r\n                                <th>Role</th>\r\n                                <th>Certificate</th>\r\n                                <th>Status</th>\r\n                              </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                              {users.map((user) => {\r\n                                return (\r\n                                  <tr key={`user-${user.id}`}>\r\n                                    <td>{user.id}</td>\r\n                                    <td>\r\n                                      <img\r\n                                        src={\r\n                                          user.image\r\n                                            ? IMAGE_ENDPOINT + user.image\r\n                                            : Placeholder\r\n                                        }\r\n                                        width=\"60\"\r\n                                        alt=\"avatar\"\r\n                                      />\r\n                                    </td>\r\n                                    <td>{user.username}</td>\r\n                                    <td>{user.email}</td>\r\n                                    <td>{user.role}</td>\r\n                                    <td>\r\n                                      {user.role.toLowerCase() === 'therapist' && user.doctor.certificate ?\r\n                                        <a href={IMAGE_ENDPOINT + user.doctor.certificate} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-primary\">view certificate</a>\r\n                                      : 'N/A'\r\n                                      }\r\n                                    </td>\r\n                                    <td>\r\n                                      <select\r\n                                        className=\"form-control\"\r\n                                        onChange={(e) =>\r\n                                          this.onChange(user.id, e)\r\n                                        }\r\n                                      >\r\n                                        <option\r\n                                          value={true}\r\n                                          selected={user.active}\r\n                                          defaultValue={user.active}\r\n                                        >\r\n                                          Active\r\n                                        </option>\r\n                                        <option\r\n                                          value={false}\r\n                                          selected={!user.active}\r\n                                          defaultValue={!user.active}\r\n                                        >\r\n                                          Inactive\r\n                                        </option>\r\n                                      </select>\r\n                                    </td>\r\n                                  </tr>\r\n                                );\r\n                              })}\r\n                            </tbody>\r\n                          </table>\r\n                        </div>\r\n                      </Card.Body>\r\n                    </Card>\r\n                  </Col>\r\n                </Row>\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Therapist;\r\n"]},"metadata":{},"sourceType":"module"}