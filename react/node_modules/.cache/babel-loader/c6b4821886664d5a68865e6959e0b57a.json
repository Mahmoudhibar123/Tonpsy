{"ast":null,"code":"import _defineProperty from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import DatePicker from\"react-datepicker\";import Header from\"../Header\";import Footer from\"../Footer\";import\"react-datepicker/dist/react-datepicker.css\";import{API_ENDPOINT,IMAGE_ENDPOINT}from\"../../constant\";var Appointment=/*#__PURE__*/function(_Component){_inherits(Appointment,_Component);var _super=_createSuper(Appointment);function Appointment(props){var _this;_classCallCheck(this,Appointment);_this=_super.call(this,props);_this.handleChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.handleDateChange=function(date){_this.setState({booking_time:date});};_this.getDoctor=function(id){var url=\"\".concat(API_ENDPOINT,\"/doctors/\").concat(id);axios.get(url,{withCredentials:true}).then(function(response){if(response.status===200){var data=response.data.doctors;_this.setState({doctor:data});}}).catch(function(error){return console.log(error);});};_this.handleSubmit=function(event){event.preventDefault();var _this$state=_this.state,booking_time=_this$state.booking_time,timeslot=_this$state.timeslot,id=_this$state.id;axios.post(\"\".concat(API_ENDPOINT,\"/bookings\"),{booking:{doctor_id:id,book_date:booking_time,timeslot:timeslot}},{withCredentials:true}).then(function(response){if(response.status===200||response.status===204){_this.props.showToast(1,'Booking successfully placed.');_this.props.history.push(\"/booking-success\");}}).catch(function(error){return console.log(error);});};_this.state={doctor:[],booking_time:new Date(),timeslot:\"\"};return _this;}_createClass(Appointment,[{key:\"componentDidMount\",value:function componentDidMount(){var id=this.props.location.state.id;this.setState({id:id});this.getDoctor(id);}},{key:\"render\",value:function render(){var _this$props=this.props,loggedInStatus=_this$props.loggedInStatus,user=_this$props.user,handleLogout=_this$props.handleLogout;var booking_time=this.state.booking_time;console.log(booking_time);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,{loggedInStatus:loggedInStatus,user:user,isInner:true,handleLogout:handleLogout}),/*#__PURE__*/React.createElement(\"section\",{id:\"therapists\",className:\"pt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container py-5 mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-7\"},/*#__PURE__*/React.createElement(\"div\",{className:\"image_container-sm\"},/*#__PURE__*/React.createElement(\"img\",{src:IMAGE_ENDPOINT+this.state.doctor.image,alt:\"\",className:\"img img-responsive\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"title mt-2\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"title-h2\"},\" \",this.state.doctor.name,\" \")),/*#__PURE__*/React.createElement(\"div\",{className:\"doc-type\"},/*#__PURE__*/React.createElement(\"a\",{href:\"#\"},\" Therapist \"),/*#__PURE__*/React.createElement(\"span\",{className:\"badge badge-primary float-right\"},\"$ \",this.state.doctor.fees)),/*#__PURE__*/React.createElement(\"div\",{className:\"description\"},/*#__PURE__*/React.createElement(\"p\",null,this.state.doctor.description)),/*#__PURE__*/React.createElement(\"div\",{className:\"uc-specialist mt-3\"},this.state.doctor.treatments&&this.state.doctor.treatments.map(function(item,tindex){if(item.name){return/*#__PURE__*/React.createElement(\"span\",{key:tindex,className:\"badge badge-primary py-1 mr-1 mb-1\"},item.name);}return null;}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5 card-container\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Select Date \"),/*#__PURE__*/React.createElement(DatePicker,{className:\"form-control\",minDate:new Date(),defaultValue:booking_time,selected:booking_time,name:\"booking_time\",onChange:this.handleDateChange,required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Select Time Slot\"),/*#__PURE__*/React.createElement(\"select\",{className:\"form-control\",name:\"timeslot\",onChange:this.handleChange,required:true},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Select Timeslot\"),this.state.doctor.available&&this.state.doctor.available.map(function(item,index){if(index===0){return/*#__PURE__*/React.createElement(React.Fragment,null,item.times&&item.times.map(function(item,index){return/*#__PURE__*/React.createElement(\"option\",{value:item.time,key:index},item.time);}));}return null;}))),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\"},\"Book Now\")))))),/*#__PURE__*/React.createElement(Footer,null));}}]);return Appointment;}(Component);export default Appointment;","map":{"version":3,"sources":["/home/fizoumizou/Documents/pfe/react/src/components/appointment/Appointment.js"],"names":["React","Component","axios","DatePicker","Header","Footer","API_ENDPOINT","IMAGE_ENDPOINT","Appointment","props","handleChange","event","target","name","value","setState","handleDateChange","date","booking_time","getDoctor","id","url","get","withCredentials","then","response","status","data","doctors","doctor","catch","error","console","log","handleSubmit","preventDefault","state","timeslot","post","booking","doctor_id","book_date","showToast","history","push","Date","location","loggedInStatus","user","handleLogout","image","fees","description","treatments","map","item","tindex","available","index","times","time"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport Header from \"../Header\";\r\nimport Footer from \"../Footer\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport {\r\n  API_ENDPOINT,\r\n  IMAGE_ENDPOINT\r\n} from \"../../constant\";\r\n\r\nclass Appointment extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      doctor: [],\r\n      booking_time: new Date(),\r\n      timeslot: \"\"\r\n    };\r\n  }\r\n\r\n  handleChange = event => {\r\n    const { name, value } = event.target;\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n  };\r\n\r\n  handleDateChange = date => {\r\n    this.setState({\r\n      booking_time: date\r\n    });\r\n  };\r\n\r\n\r\n  componentDidMount() {\r\n    const { id } = this.props.location.state;\r\n    this.setState({ id: id });\r\n    this.getDoctor(id);\r\n  }\r\n\r\n  getDoctor = id => {\r\n    var url = `${API_ENDPOINT}/doctors/${id}`;\r\n    axios\r\n      .get(url, { withCredentials: true })\r\n      .then(response => {\r\n        if (response.status === 200) {\r\n          var data = response.data.doctors;\r\n          this.setState({ doctor: data });\r\n        }\r\n      })\r\n      .catch(error => console.log(error));\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    const { booking_time, timeslot, id } = this.state;\r\n    axios\r\n      .post(\r\n        `${API_ENDPOINT}/bookings`,\r\n        { booking: { doctor_id: id, book_date: booking_time, timeslot: timeslot } },\r\n        { withCredentials: true }\r\n      )\r\n      .then(response => {\r\n        if (response.status === 200 || response.status === 204) {\r\n          this.props.showToast(1, 'Booking successfully placed.')\r\n          this.props.history.push(\"/booking-success\");\r\n        }\r\n      })\r\n      .catch(error => console.log(error));\r\n  };\r\n\r\n  render() {\r\n    const { loggedInStatus, user, handleLogout } = this.props;\r\n    const { booking_time } = this.state;\r\n    console.log(booking_time);\r\n    return (\r\n      <div>\r\n        <Header\r\n          loggedInStatus={loggedInStatus}\r\n          user={user}\r\n          isInner={true}\r\n          handleLogout={handleLogout}\r\n        />\r\n        <section id=\"therapists\" className=\"pt-5\">\r\n          <div className=\"container py-5 mt-4\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-7\">\r\n                <div className=\"image_container-sm\">\r\n                  <img\r\n                    src={IMAGE_ENDPOINT + this.state.doctor.image}\r\n                    alt=\"\"\r\n                    className=\"img img-responsive\"\r\n                  />\r\n                </div>\r\n                <div className=\"title mt-2\">\r\n                  <h2 className=\"title-h2\"> {this.state.doctor.name} </h2>\r\n                </div>\r\n                <div className=\"doc-type\">\r\n                  <a href=\"#\"> Therapist </a>\r\n                  <span className=\"badge badge-primary float-right\">$ {this.state.doctor.fees}</span>\r\n                </div>\r\n                <div className=\"description\">\r\n                  <p>{this.state.doctor.description}</p>\r\n                </div>\r\n                <div className=\"uc-specialist mt-3\">\r\n                  {this.state.doctor.treatments &&\r\n                    this.state.doctor.treatments.map((item, tindex) => {\r\n                      if (item.name) {\r\n                        return (\r\n                          <span\r\n                            key={tindex}\r\n                            className=\"badge badge-primary py-1 mr-1 mb-1\"\r\n                          >\r\n                            {item.name}\r\n                          </span>\r\n                        );\r\n                      }\r\n                      return null\r\n                    })}\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-5 card-container\">\r\n                <form onSubmit={this.handleSubmit}>\r\n                  <div className=\"form-group\">\r\n                    <label>Select Date </label>\r\n                    <DatePicker\r\n                      className=\"form-control\"\r\n                      minDate={new Date()}\r\n                      defaultValue={booking_time}\r\n                      selected={booking_time}\r\n                      name=\"booking_time\"\r\n                      onChange={this.handleDateChange}\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Select Time Slot</label>\r\n                    <select className=\"form-control\" name=\"timeslot\" onChange={this.handleChange} required>\r\n                      <option value=\"\">Select Timeslot</option>\r\n                      {this.state.doctor.available &&\r\n                        this.state.doctor.available.map((item, index) => {\r\n                          if (index === 0) {\r\n                            return (\r\n                              <>\r\n                                {item.times &&\r\n                                  item.times.map((item, index) => {\r\n                                    return (\r\n                                      <option value={item.time} key={index}>\r\n                                        {item.time}\r\n                                      </option>\r\n                                    );\r\n                                  })}\r\n                              </>\r\n                            );\r\n                          }\r\n                          return null\r\n                        })}\r\n                    </select>\r\n                  </div>\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"btn btn-primary\"\r\n                  >\r\n                    Book Now\r\n                </button>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Appointment;\r\n"]},"metadata":{},"sourceType":"module"}