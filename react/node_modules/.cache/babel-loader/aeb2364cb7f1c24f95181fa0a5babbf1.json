{"ast":null,"code":"var _jsxFileName = \"/home/fizoumizou/Documents/pfe/react/src/components/pay/PayForm.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { CardElement, Elements, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport Header from \"../Header\";\nimport Footer from \"../Footer\";\nimport CardType from \"../../assets/img/card_type.jpg\";\nimport { API_ENDPOINT } from \"../../constant\";\n\nconst CheckoutForm = props => {\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const {\n      error,\n      token\n    } = await stripe.createToken(elements.getElement(CardElement));\n\n    if (error) {\n      console.log(\"[error]\", error);\n    } else {\n      axios.post(`${API_ENDPOINT}/payments`, {\n        token: token.id,\n        payment: {\n          booking_id: props.id,\n          amount: \"50\",\n          currency: \"USD\",\n          description: \"Consulation charges.\"\n        }\n      }, {\n        withCredentials: true\n      }).then(response => {\n        props.history.push(\"/pay-success\");\n      }).catch(response => {\n        props.history.push(\"/pay-failed\");\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardElement, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary mt-4\",\n    disabled: !stripe,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, \"Pay\"));\n};\n\nconst stripePromise = loadStripe(\"pk_test_xewRnsGPAedcJWQph45FP3YD00Qqsd1KHm\");\n\nconst PayForm = props => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n  loggedInStatus: props.loggedInStatus,\n  user: props.user,\n  isInner: true,\n  handleLogout: props.handleLogout,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }\n}), /*#__PURE__*/React.createElement(\"section\", {\n  id: \"therapists\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: \"container py-5\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 7\n  }\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: \"row\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: \"col-md-8 text-center col-lg-6 mx-auto py-5\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 11\n  }\n}, /*#__PURE__*/React.createElement(\"h1\", {\n  className: \"h3 mt-5\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 13\n  }\n}, \"Payment\"), /*#__PURE__*/React.createElement(\"div\", {\n  className: \"card p-4\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 13\n  }\n}, /*#__PURE__*/React.createElement(Elements, {\n  stripe: stripePromise,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 15\n  }\n}, /*#__PURE__*/React.createElement(CheckoutForm, {\n  id: props.location.state.id,\n  history: props.history,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 17\n  }\n}))), /*#__PURE__*/React.createElement(\"img\", {\n  src: CardType,\n  width: \"200\",\n  alt: \"\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 13\n  }\n}))))), /*#__PURE__*/React.createElement(Footer, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }\n}));\n\nexport default PayForm;","map":{"version":3,"sources":["/home/fizoumizou/Documents/pfe/react/src/components/pay/PayForm.js"],"names":["React","axios","loadStripe","CardElement","Elements","useStripe","useElements","Header","Footer","CardType","API_ENDPOINT","CheckoutForm","props","stripe","elements","handleSubmit","event","preventDefault","error","token","createToken","getElement","console","log","post","id","payment","booking_id","amount","currency","description","withCredentials","then","response","history","push","catch","stripePromise","PayForm","loggedInStatus","user","handleLogout","location","state"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport {\r\n  CardElement,\r\n  Elements,\r\n  useStripe,\r\n  useElements,\r\n} from \"@stripe/react-stripe-js\";\r\nimport Header from \"../Header\";\r\nimport Footer from \"../Footer\";\r\nimport CardType from \"../../assets/img/card_type.jpg\";\r\nimport { API_ENDPOINT } from \"../../constant\";\r\n\r\nconst CheckoutForm = (props) => {\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const { error, token } = await stripe.createToken(elements.getElement(CardElement));\r\n    if (error) {\r\n      console.log(\"[error]\", error);\r\n    } else {\r\n      axios\r\n        .post(\r\n          `${API_ENDPOINT}/payments`,\r\n          {\r\n            token: token.id,\r\n            payment: {\r\n              booking_id: props.id,\r\n              amount: \"50\",\r\n              currency: \"USD\",\r\n              description: \"Consulation charges.\",\r\n            },\r\n          },\r\n          {\r\n            withCredentials: true,\r\n          }\r\n        )\r\n        .then((response) => {\r\n          props.history.push(\"/pay-success\");\r\n        })\r\n        .catch((response) => {\r\n          props.history.push(\"/pay-failed\");\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <CardElement />\r\n      <button type=\"submit\" className=\"btn btn-primary mt-4\" disabled={!stripe}>\r\n        Pay\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst stripePromise = loadStripe(\"pk_test_xewRnsGPAedcJWQph45FP3YD00Qqsd1KHm\");\r\n\r\nconst PayForm = (props) => (\r\n  <>\r\n    <Header loggedInStatus={props.loggedInStatus} user={props.user} isInner={true} handleLogout={props.handleLogout} />\r\n    <section id=\"therapists\">\r\n      <div className=\"container py-5\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-8 text-center col-lg-6 mx-auto py-5\">\r\n            <h1 className=\"h3 mt-5\">Payment</h1>\r\n            <div className=\"card p-4\">\r\n              <Elements stripe={stripePromise}>\r\n                <CheckoutForm id={props.location.state.id} history={props.history}/>\r\n              </Elements>\r\n            </div>\r\n            <img src={CardType} width=\"200\" alt=\"\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <Footer />\r\n  </>\r\n);\r\n\r\nexport default PayForm;\r\n"]},"metadata":{},"sourceType":"module"}