{"ast":null,"code":"import _defineProperty from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/fizoumizou/Documents/pfe/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import{API_ENDPOINT}from\"../../constant\";import ReactChipInput from\"react-chip-input\";var AboutMe=/*#__PURE__*/function(_Component){_inherits(AboutMe,_Component);var _super=_createSuper(AboutMe);function AboutMe(props){var _this;_classCallCheck(this,AboutMe);_this=_super.call(this,props);_this.handleChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.handleSubmit=function(event){event.preventDefault();var _this$state=_this.state,description=_this$state.description,name=_this$state.name,fees=_this$state.fees,doctor_id=_this$state.doctor_id;axios.put(\"\".concat(API_ENDPOINT,\"/doctors/\").concat(doctor_id),{name:name,description:description,fees:fees},{withCredentials:true}).then(function(response){if(response.status===200){_this.props.showToast(1,\"About updated.\");_this.redirect(doctor_id);}else{_this.props.showToast(2,\"Unbale to update About.\");_this.setState({errors:response.data.errors});}}).catch(function(error){return console.log(\"api errors:\",error);});};_this.redirect=function(doctor_id){_this.props.history.push(\"/profile-picture\",{doctor_id:doctor_id});};_this.addChip=function(value){var _this$state2=_this.state,doctor_id=_this$state2.doctor_id,ids=_this$state2.ids;axios.post(\"\".concat(API_ENDPOINT,\"/doctors/\").concat(doctor_id,\"/treatments\"),{treatment:{name:value}},{withCredentials:true}).then(function(response){var chips=_this.state.chips.slice();chips.push(value);_this.setState({chips:chips});ids.push(response.data.treatment.id);_this.setState({ids:ids});}).catch(function(response){console.log(response);});};_this.removeChip=function(index){var _this$state3=_this.state,doctor_id=_this$state3.doctor_id,ids=_this$state3.ids;axios.delete(\"\".concat(API_ENDPOINT,\"/doctors/\").concat(doctor_id,\"/treatments/\").concat(ids[index]),{},{withCredentials:true}).then(function(response){var chips=_this.state.chips.slice();chips.splice(index,1);_this.setState({chips:chips});var ids=_this.state.ids.slice();ids.splice(index,1);_this.setState({ids:ids});}).catch(function(response){console.log(response);});};_this.state={name:\"\",description:\"\",fees:\"\",chips:[],ids:[]};return _this;}_createClass(AboutMe,[{key:\"componentDidMount\",value:function componentDidMount(){var doctor_id=this.props.location.state.doctor_id;this.setState({doctor_id:doctor_id});}},{key:\"render\",value:function render(){var _this2=this;var _this$state4=this.state,description=_this$state4.description,name=_this$state4.name,fees=_this$state4.fees,chips=_this$state4.chips;return/*#__PURE__*/React.createElement(\"div\",{className:\"container my-5 bg-white p-4\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"h2\",null,\"Therapist Profile\"),/*#__PURE__*/React.createElement(\"p\",null,\"Tell me about your self\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Full Name\"),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",name:\"name\",placeholder:\"Name\",required:\"required\",value:name,onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"About Me\"),/*#__PURE__*/React.createElement(\"textarea\",{rows:\"5\",className:\"form-control\",name:\"description\",placeholder:\"Please describe about yourself...\",required:\"required\",maxLength:\"500\",value:description,onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Specialization\"),/*#__PURE__*/React.createElement(ReactChipInput,{classes:\"uc-chips\",chips:chips,onSubmit:function onSubmit(value){return _this2.addChip(value);},onRemove:function onRemove(index){return _this2.removeChip(index);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Fees\"),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",min:\"1\",className:\"form-control\",name:\"fees\",placeholder:\"Fees\",required:\"required\",value:fees,onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary w-auto\"},\"Save\"))));}}]);return AboutMe;}(Component);export default AboutMe;","map":{"version":3,"sources":["/home/fizoumizou/Documents/pfe/react/src/components/user/AboutMe.js"],"names":["React","Component","axios","API_ENDPOINT","ReactChipInput","AboutMe","props","handleChange","event","target","name","value","setState","handleSubmit","preventDefault","state","description","fees","doctor_id","put","withCredentials","then","response","status","showToast","redirect","errors","data","catch","error","console","log","history","push","addChip","ids","post","treatment","chips","slice","id","removeChip","index","delete","splice","location"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { API_ENDPOINT } from \"../../constant\";\r\nimport ReactChipInput from \"react-chip-input\";\r\n\r\nclass AboutMe extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      name: \"\",\r\n      description: \"\",\r\n      fees: \"\",\r\n      chips: [],\r\n      ids: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { doctor_id } = this.props.location.state;\r\n    this.setState({ doctor_id: doctor_id });\r\n  }\r\n\r\n  handleChange = (event) => {\r\n    const { name, value } = event.target;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    const { description, name, fees, doctor_id } = this.state;\r\n\r\n    axios\r\n      .put(\r\n        `${API_ENDPOINT}/doctors/${doctor_id}`,\r\n        {\r\n          name: name,\r\n          description: description,\r\n          fees: fees,\r\n        },\r\n        { withCredentials: true }\r\n      )\r\n      .then((response) => {\r\n        if (response.status === 200) {\r\n          this.props.showToast(1, \"About updated.\");\r\n          this.redirect(doctor_id);\r\n        } else {\r\n          this.props.showToast(2, \"Unbale to update About.\");\r\n          this.setState({\r\n            errors: response.data.errors,\r\n          });\r\n        }\r\n      })\r\n      .catch((error) => console.log(\"api errors:\", error));\r\n  };\r\n\r\n  redirect = (doctor_id) => {\r\n    this.props.history.push(\"/profile-picture\", { doctor_id: doctor_id });\r\n  };\r\n\r\n  addChip = (value) => {\r\n    const { doctor_id, ids } = this.state;\r\n    axios\r\n      .post(\r\n        `${API_ENDPOINT}/doctors/${doctor_id}/treatments`,\r\n        { treatment: { name: value } },\r\n        { withCredentials: true }\r\n      )\r\n      .then((response) => {\r\n        const chips = this.state.chips.slice();\r\n        chips.push(value);\r\n        this.setState({ chips });\r\n        ids.push(response.data.treatment.id);\r\n        this.setState({ ids });\r\n      })\r\n      .catch((response) => {\r\n        console.log(response);\r\n      });\r\n  };\r\n\r\n  removeChip = (index) => {\r\n    const { doctor_id, ids } = this.state;\r\n    axios\r\n      .delete(\r\n        `${API_ENDPOINT}/doctors/${doctor_id}/treatments/${ids[index]}`,\r\n        {},\r\n        { withCredentials: true }\r\n      )\r\n      .then((response) => {\r\n        const chips = this.state.chips.slice();\r\n        chips.splice(index, 1);\r\n        this.setState({ chips });\r\n        const ids = this.state.ids.slice();\r\n        ids.splice(index, 1);\r\n        this.setState({ ids });\r\n      })\r\n      .catch((response) => {\r\n        console.log(response);\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const { description, name, fees, chips } = this.state;\r\n\r\n    return (\r\n      <div className=\"container my-5 bg-white p-4\">\r\n        <form onSubmit={this.handleSubmit}>\r\n          <h2>Therapist Profile</h2>\r\n          <p>Tell me about your self</p>\r\n          <hr />\r\n          <div className=\"form-group\">\r\n            <label>Full Name</label>\r\n            <input\r\n              className=\"form-control\"\r\n              name=\"name\"\r\n              placeholder=\"Name\"\r\n              required=\"required\"\r\n              value={name}\r\n              onChange={this.handleChange}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>About Me</label>\r\n            <textarea\r\n              rows=\"5\"\r\n              className=\"form-control\"\r\n              name=\"description\"\r\n              placeholder=\"Please describe about yourself...\"\r\n              required=\"required\"\r\n              maxLength=\"500\"\r\n              value={description}\r\n              onChange={this.handleChange}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Specialization</label>\r\n            <ReactChipInput\r\n              classes=\"uc-chips\"\r\n              chips={chips}\r\n              onSubmit={(value) => this.addChip(value)}\r\n              onRemove={(index) => this.removeChip(index)}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Fees</label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              className=\"form-control\"\r\n              name=\"fees\"\r\n              placeholder=\"Fees\"\r\n              required=\"required\"\r\n              value={fees}\r\n              onChange={this.handleChange}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <button type=\"submit\" className=\"btn btn-primary w-auto\">\r\n              Save\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AboutMe;\r\n"]},"metadata":{},"sourceType":"module"}